<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Our SDG's</title>
  <link rel="stylesheet" href="sdgstyle.css">
  <style>
    /* --- Page basics --- */
    body {
      background-color: #121212;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      color: white;
    }

    nav { background-color: #1e1e1e; padding: 15px; text-align: center; }
    nav a { color: white; text-decoration: none; margin: 0 15px; font-weight: bold; transition: color 0.3s; }
    nav a:hover { color: #ff9800; }
    header { text-align: center; padding: 20px; }

    /* --- Cards column --- */
    .card-container { display: flex; flex-direction: column; gap: 24px; padding: 20px; width: 100%; box-sizing: border-box; }

    /* Each card is a horizontal row: image on left, info on right (in-flow) */
    .card {
      display: flex;
      align-items: flex-start;
      background-color: transparent; /* remove solid black card background */
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.25);
      cursor: pointer;
      overflow: visible;
      transition: transform 0.12s ease;
      width: 100%;
      box-sizing: border-box;
      padding-left: 0;
    }

    .card:hover { transform: translateY(-2px); }

    /* SDG image: fixed width so info will expand to the right without overlapping */
    .card img {
      width: 150px;
      height: 150px;
      object-fit: contain;
      display: block;
      border-radius: 8px;
      background: transparent; /* remove black bg behind image */
      padding: 8px;
      box-sizing: border-box;
    }

    /* Info panel lives in-flow. Background removed so there's no black box. A subtle left border separates the panel from the image. */
    .info {
      color: white;
      padding: 16px;
      box-sizing: border-box;
      border-left: 1px solid rgba(255,255,255,0.04); /* subtle separator */

      /* start visually hidden by limiting width and shifting left */
      max-width: 0px;
      opacity: 0;
      transform: translateX(-18px);
      overflow: hidden;

      transition:
        max-width 0.52s cubic-bezier(0.22, 1, 0.36, 1),
        transform 0.48s cubic-bezier(0.22, 1, 0.36, 1),
        opacity 0.28s ease 0.08s;
    }

    /* Open state: visible and slid into place. max-width is set by JS to fit content & available space. */
    .info.open {
      opacity: 1;
      transform: translateX(0);
    }

    .info p { margin: 0; line-height: 1.6; }

    /* responsive tweaks */
    @media (max-width: 700px) {
      .card img { width: 120px; height: 120px; padding: 6px; }
    }
  </style>
</head>
<body>

  <nav>
    <a href="index.html">About Us</a>
    <a href="menu.html">Our Menu</a>
    <a href="sdg.html">SDG's</a>
    <a href="timeline.html">Restaurant Timeline</a>
    <a href="staff.html">Our Staff</a>
    <a href="order.html">Order Now!</a>
    <a href="feedback.html">Contact Us!</a>
  </nav>

  <header>
    <h1>Our three michelin star restaurant is committed to the following SDGs</h1>
  </header>

  <div class="card-container">

    <div class="card" onclick="toggleInfo(this)">
      <img src="sdg/sdg2.png" alt="Sdg 2">
      <div class="info" aria-hidden="true">
        <p>
          By donating leftovers or using ingredients efficiently, the shop can help reduce food waste, contributing to better food system sustainability.
          When someone orders food, they can buy an extra meal and leave the receipt on our special board. Each receipt is basically a prepaid meal.
          A person in need can simply walk in, take a receipt from the board, and get a hot mealâ€”no questions asked.
        </p>
      </div>
    </div>

    <div class="card" onclick="toggleInfo(this)">
      <img src="sdg/sdg8.png" alt="Sdg 8">
      <div class="info" aria-hidden="true">
        <p>
          We provide employment opportunities for chefs, servers, cleaners, delivery staff, and more.
          We offer jobs to youth, women, elderly workers, or marginalized groups, helping ensure equal access to economic opportunities.
        </p>
      </div>
    </div>

    <div class="card" onclick="toggleInfo(this)">
      <img src="sdg/sdg12.png" alt="Sdg 12">
      <div class="info" aria-hidden="true">
        <p>
          Our franchise taxes customers who waste food. For example, for every 100g of food wastage, we tax the customers RM10.
          This helps encourage customers to take away food or to finish their food to prevent being taxed.
          We take leftover food and provide them to farmers. Farmers can use this food wastage to feed pigs,
          and the pig manure is then used as compost. Moldy food that pigs cannot eat is stored and later ground into compost for farmers.
        </p>
      </div>
    </div>

  </div>

  <script>
    /*
      New behavior requested:
      - remove the dark 'info' box (so info background is transparent)
      - slide the info naturally to the right (no overlap)
      - keep the opened panel visible until user opens another (only one open at a time)
    */

    function closeOtherInfos(exceptInfo) {
      document.querySelectorAll('.info.open').forEach(info => {
        if (info === exceptInfo) return;
        info.classList.remove('open');
        info.style.maxWidth = '0px';
        info.setAttribute('aria-hidden', 'true');
      });
    }

    function computeDesiredWidth(info, img) {
      const container = document.querySelector('.card-container');
      const containerStyle = getComputedStyle(container);
      const paddingLeft = parseFloat(containerStyle.paddingLeft) || 0;
      const paddingRight = parseFloat(containerStyle.paddingRight) || 0;
      const containerWidth = container.clientWidth - paddingLeft - paddingRight;
      const imgRect = img.getBoundingClientRect();
      const imgWidth = imgRect.width;

      const available = Math.max(200, containerWidth - imgWidth - 40); // leave breathing room

      // measure natural width
      const prev = info.style.maxWidth;
      info.style.maxWidth = 'none';
      const natural = info.scrollWidth + 1;
      info.style.maxWidth = prev || '0px';

      return Math.min(natural, available);
    }

    function toggleInfo(card) {
      const info = card.querySelector('.info');
      const img = card.querySelector('img');
      const isOpen = info.classList.contains('open');

      if (isOpen) {
        // close this info
        info.classList.remove('open');
        info.style.maxWidth = '0px';
        info.setAttribute('aria-hidden', 'true');
        return;
      }

      // close others (only one open at a time)
      closeOtherInfos(info);

      // compute and animate to desired width
      const desired = computeDesiredWidth(info, img);
      info.style.maxWidth = '0px';
      info.setAttribute('aria-hidden', 'false');

      requestAnimationFrame(() => {
        info.style.maxWidth = desired + 'px';
        info.classList.add('open');
      });

      // keep the inline maxWidth so it remains visible; on resize we recompute instead of auto-closing
    }

    // Recompute widths for open panels on resize so they stay visible and don't overflow
    let resizeTimer;
    window.addEventListener('resize', () => {
      clearTimeout(resizeTimer);
      resizeTimer = setTimeout(() => {
        document.querySelectorAll('.info.open').forEach(info => {
          const card = info.closest('.card');
          const img = card.querySelector('img');
          const desired = computeDesiredWidth(info, img);
          info.style.maxWidth = desired + 'px';
        });
      }, 120);
    });
  </script>

</body>
</html>
