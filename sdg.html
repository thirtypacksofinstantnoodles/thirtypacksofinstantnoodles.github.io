<html lang="en">
  <title>Our SDG's</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="sdgstyle.css">
</head>
<body>

<nav>
  <a href="#">About Us</a>
  <a href="#">Menu</a>
  <a href="#">SDG's</a>
  <a href="#">Timeline</a>
</nav>

<header>
  <h1>Our three michelin star restaurant is committed to the following SDGs</h1>
</header>

<div class="card-container">
  <div class="card" onclick="toggleInfo(this)">
    <img src="sdg/sdg2.png" alt="SDG 2">
    <div class="info-wrapper" aria-hidden="true">
      <div class="info-panel" role="region" aria-label="SDG 2 info">
        <p>
          By donating leftovers or using ingredients efficiently, the shop can help reduce food waste, contributing to better food system sustainability.
          When someone orders food, they can buy an extra meal and leave the receipt on our special board. Each receipt is basically a prepaid meal.
          A person in need can simply walk in, take a receipt from the board, and get a hot mealâ€”no questions asked.
        </p>
      </div>
    </div>
  </div>

  <div class="card" onclick="toggleInfo(this)">
    <img src="sdg/sdg8.png" alt="SDG 8">
    <div class="info-wrapper" aria-hidden="true">
      <div class="info-panel" role="region" aria-label="SDG 8 info">
        <p>
          We provide employment opportunities for chefs, servers, cleaners, delivery staff, and more.
          We offer jobs to youth, women, elderly workers, or marginalized groups, helping ensure equal access to economic opportunities.
        </p>
      </div>
    </div>
  </div>

  <div class="card" onclick="toggleInfo(this)">
    <img src="sdg/sdg12.png" alt="SDG 12">
    <div class="info-wrapper" aria-hidden="true">
      <div class="info-panel" role="region" aria-label="SDG 12 info">
        <p>
          Our franchise taxes customers who waste food. For example, for every 100g of food wastage, we tax the customers RM10.
          This helps encourage customers to take away food or to finish their food to prevent being taxed.
          We take leftover food and provide them to farmers. Farmers can use this food wastage to feed pigs,
          and the pig manure is then used as compost. Moldy food that pigs cannot eat is stored and later ground into compost for farmers.
        </p>
      </div>
    </div>
  </div>
</div>

<script>
/* Curtain-style slide in/out without corner rocket
   - wrapper reserves width in layout
   - panel slides via transform (translateX), so the entire block moves uniformly
   - on close: panel slides out, then wrapper collapses
   - only one panel open at a time
*/

const SLIDE_MS = 800; // if you change CSS var --slide-duration, change this too (ms)
const FADE_MS = 300;

function closeAllExcept(exceptWrapper){
  document.querySelectorAll('.info-wrapper').forEach(w => {
    if (w === exceptWrapper) return;
    const panel = w.querySelector('.info-panel');
    if (!panel) return;
    if (panel.classList.contains('open')) {
      retractPanel(w, panel);
    }
  });
}

function computeDesiredWidth(wrapper, img){
  const container = document.querySelector('.card-container');
  const containerRect = container.getBoundingClientRect();
  const imgRect = img.getBoundingClientRect();
  const available = Math.max(220, containerRect.width - imgRect.width - 40);

  const panel = wrapper.querySelector('.info-panel');
  wrapper.style.maxWidth = 'none';
  const natural = panel.scrollWidth + 1;
  wrapper.style.maxWidth = prevMax || '0px';
  return Math.min(natural, available);
}

function openPanel(wrapper, panel, img){
  const desired = computeDesiredWidth(wrapper, img);
  wrapper.style.maxWidth = desired + 'px';
  wrapper.setAttribute('aria-hidden','false');

  panel.style.transition = `transform ${SLIDE_MS}ms cubic-bezier(0.22,1,0.36,1), opacity ${FADE_MS}ms ease`;
  panel.style.transform = 'translateX(100%)';
  panel.style.opacity = '0';

  requestAnimationFrame(() => {
    panel.classList.add('open');
  });
}

function retractPanel(wrapper, panel){
  panel.classList.remove('open');
  const onEnd = (e) => {
    if (e.propertyName === 'transform') {
      panel.removeEventListener('transitionend', onEnd);
      wrapper.style.maxWidth = '0px';
      wrapper.setAttribute('aria-hidden','true');
    }
  };
  panel.addEventListener('transitionend', onEnd);
}

function toggleInfo(card){
  const wrapper = card.querySelector('.info-wrapper');
  const panel = wrapper.querySelector('.info-panel');
  const img = card.querySelector('img');

  const isOpen = panel.classList.contains('open');
  if (isOpen){
    retractPanel(wrapper, panel);
    return;
  }

  closeAllExcept(wrapper);
  openPanel(wrapper, panel, img);
}

let resizeTimer;
window.addEventListener('resize', () => {
  clearTimeout(resizeTimer);
  resizeTimer = setTimeout(() => {
    document.querySelectorAll('.info-wrapper').forEach(wrapper => {
      const panel = wrapper.querySelector('.info-panel');
      if (panel && panel.classList.contains('open')) {
        const card = wrapper.closest('.card');
        const img = card.querySelector('img');
        const desired = computeDesiredWidth(wrapper, img);
        wrapper.style.maxWidth = desired + 'px';
      }
    });
  }, 120);
});
</script>
</body>
</html>
